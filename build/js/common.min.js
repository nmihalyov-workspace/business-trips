"use strict";window.onload=function(){var e={popup:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.onHide,n=t.onShow,c=function(){document.body.style.cssText="position: fixed; margin-top: ".concat(-window.scrollY,"px")},i=function(e){document.body.style.cssText="position: static; margin-top: 0",window.scrollTo(0,e)};return{isShown:function(){return e.classList.contains("popup--opened")},show:function(){var t=new Promise((function(t){e.style.display="block",t()}));c(),t.then((function(){e.classList.add("popup--opened"),"function"==typeof n&&n()}))},hide:function(){var t=-parseInt(document.body.style.marginTop);e.classList.remove("popup--opened"),setTimeout((function(){e.style.display="none",i(t),"function"==typeof o&&o()}),300)}}}};Array.from(document.querySelectorAll(".js-open-popup")).map((function(t){return t.addEventListener("click",(function(t){t.preventDefault();var o=t.currentTarget.dataset.popup,n=document.querySelector('.js-popup[data-popup="'.concat(o,'"]'));e.popup(n).show()}))})),Array.from(document.querySelectorAll(".js-close-popup")).map((function(t){return t.addEventListener("click",(function(t){if(t.preventDefault(),!t.target.closest(".popup__window")||!t.currentTarget.classList.contains("js-popup")){var o=t.currentTarget.closest(".popup");e.popup(o).hide()}}))}));document.querySelector(".compare__block")&&window.addEventListener("scroll",(function e(){var t=window.scrollY;t+window.innerHeight/2>document.querySelector(".compare__block").getBoundingClientRect().top+t&&(document.querySelectorAll(".compare__block")[1].classList.add("compare__block--highlight"),window.removeEventListener("scroll",e))}));document.querySelector(".organization__map")&&window.addEventListener("scroll",(function e(){var t=window.scrollY;t+window.innerHeight/1.5>document.querySelector(".organization__map").getBoundingClientRect().top+t&&(document.querySelector(".organization__map").classList.add("organization__map--animated"),window.removeEventListener("scroll",e))})),document.querySelectorAll(".solutions__tab").length&&(Array.from(document.querySelectorAll(".solutions__tab")).map((function(e){e.addEventListener("click",(function(e){var t=e.currentTarget.dataset.tab;document.querySelector(".solutions__tab--active").classList.remove("solutions__tab--active"),e.currentTarget.classList.add("solutions__tab--active"),document.querySelector(".solutions__content--active").classList.remove("solutions__content--active"),document.querySelector('.solutions__content[data-tab="'.concat(t,'"]')).classList.add("solutions__content--active")}))})),Array.from(document.querySelectorAll(".solutions__select-item")).map((function(e){e.addEventListener("click",(function(e){var t=e.currentTarget,o=t.parentNode.previousElementSibling,n=t.dataset.tab,c=document.querySelector(".solutions__select");c.classList.contains("solutions__select--active")&&o.classList.contains("solutions__select-item")&&(t.parentNode.prepend(o),t.parentNode.parentNode.prepend(t)),c.classList.toggle("solutions__select--active"),document.querySelector(".solutions__content--active").classList.remove("solutions__content--active"),document.querySelector('.solutions__content[data-tab="'.concat(n,'"]')).classList.add("solutions__content--active")}))}))),Array.from(document.querySelectorAll(".possibility__more")).map((function(e){e.addEventListener("click",(function(e){var t=e.currentTarget,o=t.dataset.show,n=t.dataset.hide;t.parentNode.querySelector(".possibility__highlight").classList.toggle("possibility__highlight--shown"),t.innerText===o?t.innerText=n:t.innerText=o}))}));var t=document.querySelector(".js-contacts-map");if(t){var o=[55.805533,37.521336];ymaps.ready((function(){var e=new ymaps.Map(t,{center:o,zoom:16}),n=new ymaps.Placemark(o,{},{iconLayout:"default#image",iconImageHref:"img/icons/pin.png",iconImageSize:[71,86],iconImageOffset:[-35,-86]});e.geoObjects.add(n)}))}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJvbmxvYWQiLCIkYXBpIiwiJHBvcHVwIiwiX3JlZiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm9uSGlkZSIsIm9uU2hvdyIsImRvY3VtZW50Iiwic3R5bGUiLCJjb25jYXQiLCJzY3JvbGxZIiwiYm9keSIsImNzc1RleHQiLCJzY3JvbGxUbyIsIm9mZnNldCIsImlzU2hvd24iLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNob3ciLCJQcm9taXNlIiwicmVzb2x2ZSIsImRpc3BsYXkiLCJoaWRlT3ZlcmZsb3ciLCJhZGQiLCJwcm9taXNlIiwiaGlkZSIsInBhcnNlSW50IiwibWFyZ2luVG9wIiwicmVtb3ZlIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIm1hcCIsImVsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImN1cnJlbnRUYXJnZXQiLCJwb3B1cCIsInRhcmdldCIsImNsb3Nlc3QiLCJxdWVyeVNlbGVjdG9yIiwiY29tcGFyZUFuaW1hdGlvbiIsInkiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwib3JnYW5pemF0aW9uQW5pbWF0aW9uIiwiaW5uZXJIZWlnaHQiLCJ0YWIiLCJjdXJyZW50U2VsZWN0SXRlbSIsImRhdGFzZXQiLCJwYXJlbnROb2RlIiwicHJldmlvdXNFbGVtZW50U2libGluZyIsInNlbGVjdCIsImVsZW1lbnQiLCJwcmVwZW5kIiwic2hvd1RleHQiLCJoaWRlVGV4dCIsInRvZ2dsZSIsImlubmVyVGV4dCIsIm1hcEVsZW1lbnQiLCJpbml0TWFwIiwieW1hcHMiLCJyZWFkeSIsImxvY2F0aW9uIiwiem9vbSIsIk1hcCIsImNlbnRlciIsInBpbiIsImljb25JbWFnZVNpemUiLCJQbGFjZW1hcmsiLCJpY29uSW1hZ2VPZmZzZXQiLCJpY29uSW1hZ2VIcmVmIiwiZ2Vv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LE1BQUFJLElBQUFOLEVBQUEsQ0FGOEJPLE9BQXRDSCxFQUtBQyxLQUFNRyxLQUdKQyxFQUFBQSxJQUFBQSxNQUFlQyxVQUg2Qk4sRUFBQSxHQUFBLENBSTVDTyxXQUFBQSxnQkFKNENDLGNBQTlDLG9CQU9BekMsY0FBZVQsQ0FBQUEsR0FBSThDLElBYnJCRyxnQkFBQSxFQUFBLElBQUEsTUFpQkR4QyxFQUFBMEMsV0FBQW5ELElBQUE4QyIsImZpbGUiOiJjb21tb24ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93Lm9ubG9hZCA9ICgpID0+IHtcblxuICAvLyDQntCx0YrQtdC60YIg0LPQu9C+0LHQsNC70YzQvdC+0LPQviBBUElcbmNvbnN0ICRhcGkgPSB7fTtcblxuLy8gQVBJINC00LvRjyDRgNCw0LHQvtGC0Ysg0YEg0L/QvtC/0LDQv9Cw0LzQuFxuJGFwaS5wb3B1cCA9ICgkcG9wdXAsIHsgb25IaWRlLCBvblNob3cgfSA9IHt9KSA9PiB7XG4gIC8vINCe0YLQutC70Y7Rh9Cw0LXRgiDQstC+0LfQvNC+0LbQvdC+0YHRgtGMINGB0LrRgNC+0LvQu9C40YLRjCDRgdGC0YDQsNC90LjRhtGDXG4gIGNvbnN0IGhpZGVPdmVyZmxvdyA9ICgpID0+IHtcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmNzc1RleHQgPSBgcG9zaXRpb246IGZpeGVkOyBtYXJnaW4tdG9wOiAkey13aW5kb3cuc2Nyb2xsWX1weGA7XG4gIH07XG4gIFxuICAvLyDQktC60LvRjtGH0LDQtdGCINCy0L7Qt9C80L7QttC90L7RgdGC0Ywg0YHQutGA0L7Qu9C70LjRgtGMINGB0YLRgNCw0L3QuNGG0YNcbiAgY29uc3Qgc2hvd092ZXJmbG93ID0gb2Zmc2V0ID0+IHtcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmNzc1RleHQgPSAncG9zaXRpb246IHN0YXRpYzsgbWFyZ2luLXRvcDogMCc7XG4gICAgXG4gICAgd2luZG93LnNjcm9sbFRvKDAsIG9mZnNldCk7XG4gIH07XG4gIFxuICByZXR1cm4ge1xuICAgIC8vINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCIHRydWUsINC10YHQu9C4INC/0L7Qv9Cw0L8g0L/QvtC60LDQt9GL0LLQsNC10YLRgdGPLCDQsiDQuNC90L7QvCDRgdC70YPRh9Cw0LUgZmFsc2VcbiAgICBpc1Nob3duOiAoKSA9PiAkcG9wdXAuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cC0tb3BlbmVkJyksXG4gICAgLy8g0J/QvtC60LDQt9GL0LLQsNC10YIg0L/QvtC/0LDQv1xuICAgIHNob3coKSB7XG4gICAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICRwb3B1cC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGhpZGVPdmVyZmxvdygpO1xuXG4gICAgICBwcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAkcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXAtLW9wZW5lZCcpO1xuICAgICAgICBpZiAodHlwZW9mIG9uU2hvdyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIG9uU2hvdygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vINCh0LrRgNGL0LLQsNC10YIg0L/QvtC/0LDQv1xuICAgIGhpZGUoKSB7XG4gICAgICBjb25zdCBvZmZzZXQgPSAtcGFyc2VJbnQoZG9jdW1lbnQuYm9keS5zdHlsZS5tYXJnaW5Ub3ApO1xuICBcbiAgICAgICRwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cC0tb3BlbmVkJyk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgJHBvcHVwLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHNob3dPdmVyZmxvdyhvZmZzZXQpO1xuICAgICAgICBpZiAodHlwZW9mIG9uSGlkZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIG9uSGlkZSgpO1xuICAgICAgICB9XG4gICAgICB9LCAzMDApO1xuICAgIH1cbiAgfTtcbn07XG5cbiAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtb3Blbi1wb3B1cCcpKS5tYXAoZWwgPT5cbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBjb25zdCB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wb3B1cDtcbiAgICBjb25zdCAkcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuanMtcG9wdXBbZGF0YS1wb3B1cD1cIiR7dGFyZ2V0fVwiXWApO1xuICAgIFxuICAgICRhcGkucG9wdXAoJHBvcHVwKS5zaG93KCk7XG4gIH0pXG4pO1xuICBcbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWNsb3NlLXBvcHVwJykpLm1hcChlbCA9PlxuICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGlmKCFlLnRhcmdldC5jbG9zZXN0KCcucG9wdXBfX3dpbmRvdycpIHx8ICFlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy1wb3B1cCcpKSB7XG4gICAgICBjb25zdCAkcG9wdXAgPSBlLmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnBvcHVwJyk7XG5cbiAgICAgICRhcGkucG9wdXAoJHBvcHVwKS5oaWRlKCk7XG4gICAgfVxuICB9KVxuKTtcblxuICBjb25zdCBjb21wYXJlQW5pbWF0aW9uID0gKCkgPT4ge1xuICBjb25zdCB5ID0gd2luZG93LnNjcm9sbFk7XG5cbiAgaWYgKHkgKyB3aW5kb3cuaW5uZXJIZWlnaHQgLyAyID4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbXBhcmVfX2Jsb2NrJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgeSkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb21wYXJlX19ibG9jaycpWzFdLmNsYXNzTGlzdC5hZGQoJ2NvbXBhcmVfX2Jsb2NrLS1oaWdobGlnaHQnKTtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgY29tcGFyZUFuaW1hdGlvbilcbiAgfVxufTtcblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb21wYXJlX19ibG9jaycpKSB7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBjb21wYXJlQW5pbWF0aW9uKTtcbn1cbiAgY29uc3Qgb3JnYW5pemF0aW9uQW5pbWF0aW9uID0gKCkgPT4ge1xuICBjb25zdCB5ID0gd2luZG93LnNjcm9sbFk7XG5cbiAgaWYgKHkgKyB3aW5kb3cuaW5uZXJIZWlnaHQgLyAxLjUgPiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3JnYW5pemF0aW9uX19tYXAnKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyB5KSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm9yZ2FuaXphdGlvbl9fbWFwJykuY2xhc3NMaXN0LmFkZCgnb3JnYW5pemF0aW9uX19tYXAtLWFuaW1hdGVkJyk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIG9yZ2FuaXphdGlvbkFuaW1hdGlvbilcbiAgfVxufTtcblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vcmdhbml6YXRpb25fX21hcCcpKSB7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBvcmdhbml6YXRpb25BbmltYXRpb24pO1xufVxuICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNvbHV0aW9uc19fdGFiJykubGVuZ3RoKSB7XG4gIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNvbHV0aW9uc19fdGFiJykpLm1hcChlbCA9PiB7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgIGNvbnN0IHRhcmdldCA9IGUuY3VycmVudFRhcmdldC5kYXRhc2V0LnRhYjtcblxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNvbHV0aW9uc19fdGFiLS1hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdzb2x1dGlvbnNfX3RhYi0tYWN0aXZlJyk7XG4gICAgICBlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmFkZCgnc29sdXRpb25zX190YWItLWFjdGl2ZScpO1xuICAgICAgXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc29sdXRpb25zX19jb250ZW50LS1hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdzb2x1dGlvbnNfX2NvbnRlbnQtLWFjdGl2ZScpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnNvbHV0aW9uc19fY29udGVudFtkYXRhLXRhYj1cIiR7dGFyZ2V0fVwiXWApLmNsYXNzTGlzdC5hZGQoJ3NvbHV0aW9uc19fY29udGVudC0tYWN0aXZlJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNvbHV0aW9uc19fc2VsZWN0LWl0ZW0nKSkubWFwKGVsID0+IHtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgY29uc3QgZWxlbWVudCA9IGUuY3VycmVudFRhcmdldDtcbiAgICAgIGNvbnN0IGN1cnJlbnRTZWxlY3RJdGVtID0gZWxlbWVudC5wYXJlbnROb2RlLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG4gICAgICBjb25zdCB0YXJnZXQgPSBlbGVtZW50LmRhdGFzZXQudGFiO1xuICAgICAgY29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNvbHV0aW9uc19fc2VsZWN0Jyk7XG5cbiAgICAgIGlmIChzZWxlY3QuY2xhc3NMaXN0LmNvbnRhaW5zKCdzb2x1dGlvbnNfX3NlbGVjdC0tYWN0aXZlJykgJiYgY3VycmVudFNlbGVjdEl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdzb2x1dGlvbnNfX3NlbGVjdC1pdGVtJykpIHtcbiAgICAgICAgZWxlbWVudC5wYXJlbnROb2RlLnByZXBlbmQoY3VycmVudFNlbGVjdEl0ZW0pO1xuICAgICAgICBlbGVtZW50LnBhcmVudE5vZGUucGFyZW50Tm9kZS5wcmVwZW5kKGVsZW1lbnQpO1xuICAgICAgfVxuXG4gICAgICBzZWxlY3QuY2xhc3NMaXN0LnRvZ2dsZSgnc29sdXRpb25zX19zZWxlY3QtLWFjdGl2ZScpO1xuICAgICAgXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc29sdXRpb25zX19jb250ZW50LS1hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdzb2x1dGlvbnNfX2NvbnRlbnQtLWFjdGl2ZScpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnNvbHV0aW9uc19fY29udGVudFtkYXRhLXRhYj1cIiR7dGFyZ2V0fVwiXWApLmNsYXNzTGlzdC5hZGQoJ3NvbHV0aW9uc19fY29udGVudC0tYWN0aXZlJyk7XG4gICAgfSk7XG4gIH0pO1xufVxuICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3NzaWJpbGl0eV9fbW9yZScpKS5tYXAoZWwgPT4ge1xuICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgY29uc3Qgc2hvd1RleHQgPSBlbGVtZW50LmRhdGFzZXQuc2hvdztcbiAgICBjb25zdCBoaWRlVGV4dCA9IGVsZW1lbnQuZGF0YXNldC5oaWRlO1xuXG4gICAgZWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5wb3NzaWJpbGl0eV9faGlnaGxpZ2h0JykuY2xhc3NMaXN0LnRvZ2dsZSgncG9zc2liaWxpdHlfX2hpZ2hsaWdodC0tc2hvd24nKTtcbiAgICBlbGVtZW50LmlubmVyVGV4dCA9PT0gc2hvd1RleHQgPyBlbGVtZW50LmlubmVyVGV4dCA9IGhpZGVUZXh0IDogZWxlbWVudC5pbm5lclRleHQgPSBzaG93VGV4dDtcbiAgfSk7XG59KTtcbiAgY29uc3QgbWFwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1jb250YWN0cy1tYXAnKTtcblxuaWYgKG1hcEVsZW1lbnQpIHtcbiAgY29uc3QgbG9jYXRpb24gPSBbNTUuODA1NTMzLCAzNy41MjEzMzZdO1xuICBcbiAgY29uc3QgaW5pdE1hcCA9ICgpID0+IHtcbiAgICBjb25zdCBtYXAgPSBuZXcgeW1hcHMuTWFwKG1hcEVsZW1lbnQsIHtcbiAgICAgIGNlbnRlcjogbG9jYXRpb24sXG4gICAgICB6b29tOiAxNlxuICAgIH0pO1xuICBcbiAgICBjb25zdCBwaW4gPSBuZXcgeW1hcHMuUGxhY2VtYXJrKGxvY2F0aW9uLCB7fSwge1xuICAgICAgaWNvbkxheW91dDogJ2RlZmF1bHQjaW1hZ2UnLFxuICAgICAgaWNvbkltYWdlSHJlZjogJ2ltZy9pY29ucy9waW4ucG5nJyxcbiAgICAgIGljb25JbWFnZVNpemU6IFs3MSwgODZdLFxuICAgICAgaWNvbkltYWdlT2Zmc2V0OiBbLTM1LCAtODZdXG4gICAgfSk7XG4gIFxuICAgIG1hcC5nZW9PYmplY3RzLmFkZChwaW4pXG4gIH07XG4gIFxuICB5bWFwcy5yZWFkeShpbml0TWFwKTtcbn1cblxufSJdfQ==
