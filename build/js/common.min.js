"use strict";window.onload=function(){var e={popup:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.onHide,n=t.onShow,c=function(){document.body.style.cssText="position: fixed; margin-top: ".concat(-window.scrollY,"px")},i=function(e){document.body.style.cssText="position: static; margin-top: 0",window.scrollTo(0,e)};return{isShown:function(){return e.classList.contains("popup--opened")},show:function(){var t=new Promise((function(t){e.style.display="block",t()}));c(),t.then((function(){e.classList.add("popup--opened"),"function"==typeof n&&n()}))},hide:function(){var t=-parseInt(document.body.style.marginTop);e.classList.remove("popup--opened"),setTimeout((function(){e.style.display="none",i(t),"function"==typeof o&&o()}),300)}}}};Array.from(document.querySelectorAll(".js-open-popup")).map((function(t){return t.addEventListener("click",(function(t){t.preventDefault();var o=t.currentTarget.dataset.popup,n=document.querySelector('.js-popup[data-popup="'.concat(o,'"]'));e.popup(n).show()}))})),Array.from(document.querySelectorAll(".js-close-popup")).map((function(t){return t.addEventListener("click",(function(t){if(t.preventDefault(),!t.target.closest(".popup__window")||!t.currentTarget.classList.contains("js-popup")){var o=t.currentTarget.closest(".popup");e.popup(o).hide()}}))}));var t=document.querySelector(".js-burger"),o=0;document.querySelector(".js-burger").addEventListener("click",(function(){document.querySelector(".header__burger--active")?(document.body.style.cssText="position: static; margin-top: 0",window.scrollTo(0,o)):(o=window.scrollY,document.body.style.cssText="position: fixed; margin-top: ".concat(-o,"px")),t.classList.toggle("header__burger--active"),document.querySelector(".header__menu").classList.toggle("header__menu--active")}));document.querySelector(".compare__block")&&window.addEventListener("scroll",(function e(){var t=window.scrollY;t+window.innerHeight/2>document.querySelector(".compare__block").getBoundingClientRect().top+t&&(document.querySelectorAll(".compare__block")[1].classList.add("compare__block--highlight"),window.removeEventListener("scroll",e))}));document.querySelector(".organization__map")&&window.addEventListener("scroll",(function e(){var t=window.scrollY;t+window.innerHeight/1.5>document.querySelector(".organization__map").getBoundingClientRect().top+t&&(document.querySelector(".organization__map").classList.add("organization__map--animated"),window.removeEventListener("scroll",e))})),document.querySelectorAll(".solutions__tab").length&&(Array.from(document.querySelectorAll(".solutions__tab")).map((function(e){e.addEventListener("click",(function(e){var t=e.currentTarget.dataset.tab;document.querySelector(".solutions__tab--active").classList.remove("solutions__tab--active"),e.currentTarget.classList.add("solutions__tab--active"),document.querySelector(".solutions__content--active").classList.remove("solutions__content--active"),document.querySelector('.solutions__content[data-tab="'.concat(t,'"]')).classList.add("solutions__content--active")}))})),Array.from(document.querySelectorAll(".solutions__select-item")).map((function(e){e.addEventListener("click",(function(e){var t=e.currentTarget,o=t.parentNode.previousElementSibling,n=t.dataset.tab,c=document.querySelector(".solutions__select");c.classList.contains("solutions__select--active")&&o.classList.contains("solutions__select-item")&&(t.parentNode.prepend(o),t.parentNode.parentNode.prepend(t)),c.classList.toggle("solutions__select--active"),document.querySelector(".solutions__content--active").classList.remove("solutions__content--active"),document.querySelector('.solutions__content[data-tab="'.concat(n,'"]')).classList.add("solutions__content--active")}))}))),Array.from(document.querySelectorAll(".possibility__more")).map((function(e){e.addEventListener("click",(function(e){var t=e.currentTarget,o=t.dataset.show,n=t.dataset.hide;t.parentNode.querySelector(".possibility__highlight").classList.toggle("possibility__highlight--shown"),t.innerText===o?t.innerText=n:t.innerText=o}))}));var n=document.querySelector(".js-contacts-map");if(n){var c=[55.805533,37.521336];ymaps.ready((function(){var e=new ymaps.Map(n,{center:c,zoom:16}),t=new ymaps.Placemark(c,{},{iconLayout:"default#image",iconImageHref:"img/icons/pin.png",iconImageSize:[71,86],iconImageOffset:[-35,-86]});e.geoObjects.add(t)}))}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJvbmxvYWQiLCIkYXBpIiwiJHBvcHVwIiwiX3JlZiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm9uSGlkZSIsIm9uU2hvdyIsImRvY3VtZW50Iiwic3R5bGUiLCJjb25jYXQiLCJzY3JvbGxZIiwiYm9keSIsImNzc1RleHQiLCJzY3JvbGxUbyIsIm9mZnNldCIsImlzU2hvd24iLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNob3ciLCJQcm9taXNlIiwicmVzb2x2ZSIsImRpc3BsYXkiLCJoaWRlT3ZlcmZsb3ciLCJhZGQiLCJwcm9taXNlIiwiaGlkZSIsInBhcnNlSW50IiwibWFyZ2luVG9wIiwicmVtb3ZlIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIm1hcCIsImVsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImN1cnJlbnRUYXJnZXQiLCJwb3B1cCIsInRhcmdldCIsImNsb3Nlc3QiLCJxdWVyeVNlbGVjdG9yIiwic2hvd092ZXJmbG93IiwiJGJ1cmdlciIsInRvZ2dsZSIsImNvbXBhcmVBbmltYXRpb24iLCJ5IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9yZ2FuaXphdGlvbkFuaW1hdGlvbiIsImRhdGFzZXQiLCJ0YWIiLCJlbGVtZW50IiwicGFyZW50Tm9kZSIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJjdXJyZW50U2VsZWN0SXRlbSIsInNlbGVjdCIsInNob3dUZXh0IiwiaGlkZVRleHQiLCIkbWFwIiwibG9jYXRpb24iLCJ5bWFwcyIsInJlYWR5IiwiTWFwIiwiY2VudGVyIiwiem9vbSIsImljb25MYXlvdXQiLCJQbGFjZW1hcmsiLCJpY29uSW1hZ2VIcmVmIiwiaWNvbkltYWdlU2l6ZSIsImljb25JbWFnZU9mZnNldCIsImdlb09iamVjdHMiLCJwaW4iXSwibWFw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QUEsRUFBQUEsY0FDS21CLEVBQVdBLEVBQUNoQixRQUFsQm5CLEtBQ013QyxFQUFXTCxFQUFRRixRQUFRakMsS0FHakNtQyxFQUFBQSxXQUFRQyxjQUFXYiwyQkFBbkJ6QixVQUE0REEsT0FBVTRCLGlDQUN0RVMsRUFBQUEsWUFBQUssRUFBQUwsRUFBaUNBLFVBQUFNLEVBQWpDTixFQUFnRUEsVUFBQUssUUFHbEUsSUFBTUUsRUFBT3JELFNBQVNrQyxjQUFjLG9CQUV0QyxHQUFBbUIsRUFBQSxDQUNFLElBQU1DLEVBQVcsQ0FBQyxVQUFXLFdBdksvQkMsTUFBQUMsT0F5S2tCLFdBQ2QsSUFBTS9CLEVBQU0sSUFBSThCLE1BQU1FLElBQUlKLEVBQU0sQ0FDOUJLLE9BQU1KLEVBQ05LLEtBQUksS0FJSkMsRUFBQUEsSUFBWUwsTUFBQU0sVUFEZ0NQLEVBQUEsR0FBQSxDQUU1Q1EsV0FBQUEsZ0JBQ0FDLGNBQWEsb0JBQ2JDLGNBQUFBLENBQUFBLEdBQWtCLElBSjBCQSxnQkFBOUMsRUFBQSxJQUFBLE1BT0F2QyxFQUFJd0MsV0FBV2pELElBQUlrRCIsImZpbGUiOiJjb21tb24ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsid2luZG93Lm9ubG9hZCA9ICgpID0+IHtcblxuICAvLyDQntCx0YrQtdC60YIg0LPQu9C+0LHQsNC70YzQvdC+0LPQviBBUElcbmNvbnN0ICRhcGkgPSB7fTtcblxuLy8gQVBJINC00LvRjyDRgNCw0LHQvtGC0Ysg0YEg0L/QvtC/0LDQv9Cw0LzQuFxuJGFwaS5wb3B1cCA9ICgkcG9wdXAsIHsgb25IaWRlLCBvblNob3cgfSA9IHt9KSA9PiB7XG4gIC8vINCe0YLQutC70Y7Rh9Cw0LXRgiDQstC+0LfQvNC+0LbQvdC+0YHRgtGMINGB0LrRgNC+0LvQu9C40YLRjCDRgdGC0YDQsNC90LjRhtGDXG4gIGNvbnN0IGhpZGVPdmVyZmxvdyA9ICgpID0+IHtcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmNzc1RleHQgPSBgcG9zaXRpb246IGZpeGVkOyBtYXJnaW4tdG9wOiAkey13aW5kb3cuc2Nyb2xsWX1weGA7XG4gIH07XG4gIFxuICAvLyDQktC60LvRjtGH0LDQtdGCINCy0L7Qt9C80L7QttC90L7RgdGC0Ywg0YHQutGA0L7Qu9C70LjRgtGMINGB0YLRgNCw0L3QuNGG0YNcbiAgY29uc3Qgc2hvd092ZXJmbG93ID0gb2Zmc2V0ID0+IHtcbiAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmNzc1RleHQgPSAncG9zaXRpb246IHN0YXRpYzsgbWFyZ2luLXRvcDogMCc7XG4gICAgXG4gICAgd2luZG93LnNjcm9sbFRvKDAsIG9mZnNldCk7XG4gIH07XG4gIFxuICByZXR1cm4ge1xuICAgIC8vINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCIHRydWUsINC10YHQu9C4INC/0L7Qv9Cw0L8g0L/QvtC60LDQt9GL0LLQsNC10YLRgdGPLCDQsiDQuNC90L7QvCDRgdC70YPRh9Cw0LUgZmFsc2VcbiAgICBpc1Nob3duOiAoKSA9PiAkcG9wdXAuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cC0tb3BlbmVkJyksXG4gICAgLy8g0J/QvtC60LDQt9GL0LLQsNC10YIg0L/QvtC/0LDQv1xuICAgIHNob3coKSB7XG4gICAgICBjb25zdCBwcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgICRwb3B1cC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfSk7XG5cbiAgICAgIGhpZGVPdmVyZmxvdygpO1xuXG4gICAgICBwcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICAkcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXAtLW9wZW5lZCcpO1xuICAgICAgICBpZiAodHlwZW9mIG9uU2hvdyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIG9uU2hvdygpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuICAgIC8vINCh0LrRgNGL0LLQsNC10YIg0L/QvtC/0LDQv1xuICAgIGhpZGUoKSB7XG4gICAgICBjb25zdCBvZmZzZXQgPSAtcGFyc2VJbnQoZG9jdW1lbnQuYm9keS5zdHlsZS5tYXJnaW5Ub3ApO1xuICBcbiAgICAgICRwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cC0tb3BlbmVkJyk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgJHBvcHVwLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgIHNob3dPdmVyZmxvdyhvZmZzZXQpO1xuICAgICAgICBpZiAodHlwZW9mIG9uSGlkZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIG9uSGlkZSgpO1xuICAgICAgICB9XG4gICAgICB9LCAzMDApO1xuICAgIH1cbiAgfTtcbn07XG5cbiAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtb3Blbi1wb3B1cCcpKS5tYXAoZWwgPT5cbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBjb25zdCB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC5wb3B1cDtcbiAgICBjb25zdCAkcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuanMtcG9wdXBbZGF0YS1wb3B1cD1cIiR7dGFyZ2V0fVwiXWApO1xuICAgIFxuICAgICRhcGkucG9wdXAoJHBvcHVwKS5zaG93KCk7XG4gIH0pXG4pO1xuICBcbkFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLWNsb3NlLXBvcHVwJykpLm1hcChlbCA9PlxuICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGlmKCFlLnRhcmdldC5jbG9zZXN0KCcucG9wdXBfX3dpbmRvdycpIHx8ICFlLmN1cnJlbnRUYXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdqcy1wb3B1cCcpKSB7XG4gICAgICBjb25zdCAkcG9wdXAgPSBlLmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgnLnBvcHVwJyk7XG5cbiAgICAgICRhcGkucG9wdXAoJHBvcHVwKS5oaWRlKCk7XG4gICAgfVxuICB9KVxuKTtcbiAgXG4gIGNvbnN0ICRidXJnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtYnVyZ2VyJyk7XG5sZXQgb2Zmc2V0ID0gMDtcbmNvbnN0IGhpZGVPdmVyZmxvdyA9ICgpID0+IHtcbiAgb2Zmc2V0ID0gd2luZG93LnNjcm9sbFk7XG4gIGRvY3VtZW50LmJvZHkuc3R5bGUuY3NzVGV4dCA9IGBwb3NpdGlvbjogZml4ZWQ7IG1hcmdpbi10b3A6ICR7LW9mZnNldH1weGA7XG59O1xuY29uc3Qgc2hvd092ZXJmbG93ID0gKCkgPT4ge1xuICBkb2N1bWVudC5ib2R5LnN0eWxlLmNzc1RleHQgPSAncG9zaXRpb246IHN0YXRpYzsgbWFyZ2luLXRvcDogMCc7XG4gIFxuICB3aW5kb3cuc2Nyb2xsVG8oMCwgb2Zmc2V0KTtcbn07XG5cbmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1idXJnZXInKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX2J1cmdlci0tYWN0aXZlJykpIHtcbiAgICBzaG93T3ZlcmZsb3coKTtcbiAgfSBlbHNlIHtcbiAgICBoaWRlT3ZlcmZsb3coKTtcbiAgfVxuICAkYnVyZ2VyLmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlcl9fYnVyZ2VyLS1hY3RpdmUnKTtcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlcl9fbWVudScpLmNsYXNzTGlzdC50b2dnbGUoJ2hlYWRlcl9fbWVudS0tYWN0aXZlJyk7XG59KTtcbiAgY29uc3QgY29tcGFyZUFuaW1hdGlvbiA9ICgpID0+IHtcbiAgY29uc3QgeSA9IHdpbmRvdy5zY3JvbGxZO1xuXG4gIGlmICh5ICsgd2luZG93LmlubmVySGVpZ2h0IC8gMiA+IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb21wYXJlX19ibG9jaycpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHkpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY29tcGFyZV9fYmxvY2snKVsxXS5jbGFzc0xpc3QuYWRkKCdjb21wYXJlX19ibG9jay0taGlnaGxpZ2h0Jyk7XG4gICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGNvbXBhcmVBbmltYXRpb24pXG4gIH1cbn07XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29tcGFyZV9fYmxvY2snKSkge1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgY29tcGFyZUFuaW1hdGlvbik7XG59XG4gIGNvbnN0IG9yZ2FuaXphdGlvbkFuaW1hdGlvbiA9ICgpID0+IHtcbiAgY29uc3QgeSA9IHdpbmRvdy5zY3JvbGxZO1xuXG4gIGlmICh5ICsgd2luZG93LmlubmVySGVpZ2h0IC8gMS41ID4gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm9yZ2FuaXphdGlvbl9fbWFwJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgeSkge1xuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vcmdhbml6YXRpb25fX21hcCcpLmNsYXNzTGlzdC5hZGQoJ29yZ2FuaXphdGlvbl9fbWFwLS1hbmltYXRlZCcpO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBvcmdhbml6YXRpb25BbmltYXRpb24pXG4gIH1cbn07XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3JnYW5pemF0aW9uX19tYXAnKSkge1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgb3JnYW5pemF0aW9uQW5pbWF0aW9uKTtcbn1cbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zb2x1dGlvbnNfX3RhYicpLmxlbmd0aCkge1xuICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zb2x1dGlvbnNfX3RhYicpKS5tYXAoZWwgPT4ge1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICBjb25zdCB0YXJnZXQgPSBlLmN1cnJlbnRUYXJnZXQuZGF0YXNldC50YWI7XG5cbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zb2x1dGlvbnNfX3RhYi0tYWN0aXZlJykuY2xhc3NMaXN0LnJlbW92ZSgnc29sdXRpb25zX190YWItLWFjdGl2ZScpO1xuICAgICAgZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3NvbHV0aW9uc19fdGFiLS1hY3RpdmUnKTtcbiAgICAgIFxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNvbHV0aW9uc19fY29udGVudC0tYWN0aXZlJykuY2xhc3NMaXN0LnJlbW92ZSgnc29sdXRpb25zX19jb250ZW50LS1hY3RpdmUnKTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5zb2x1dGlvbnNfX2NvbnRlbnRbZGF0YS10YWI9XCIke3RhcmdldH1cIl1gKS5jbGFzc0xpc3QuYWRkKCdzb2x1dGlvbnNfX2NvbnRlbnQtLWFjdGl2ZScpO1xuICAgIH0pO1xuICB9KTtcblxuICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zb2x1dGlvbnNfX3NlbGVjdC1pdGVtJykpLm1hcChlbCA9PiB7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgICBjb25zdCBjdXJyZW50U2VsZWN0SXRlbSA9IGVsZW1lbnQucGFyZW50Tm9kZS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZWxlbWVudC5kYXRhc2V0LnRhYjtcbiAgICAgIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zb2x1dGlvbnNfX3NlbGVjdCcpO1xuXG4gICAgICBpZiAoc2VsZWN0LmNsYXNzTGlzdC5jb250YWlucygnc29sdXRpb25zX19zZWxlY3QtLWFjdGl2ZScpICYmIGN1cnJlbnRTZWxlY3RJdGVtLmNsYXNzTGlzdC5jb250YWlucygnc29sdXRpb25zX19zZWxlY3QtaXRlbScpKSB7XG4gICAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5wcmVwZW5kKGN1cnJlbnRTZWxlY3RJdGVtKTtcbiAgICAgICAgZWxlbWVudC5wYXJlbnROb2RlLnBhcmVudE5vZGUucHJlcGVuZChlbGVtZW50KTtcbiAgICAgIH1cblxuICAgICAgc2VsZWN0LmNsYXNzTGlzdC50b2dnbGUoJ3NvbHV0aW9uc19fc2VsZWN0LS1hY3RpdmUnKTtcbiAgICAgIFxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNvbHV0aW9uc19fY29udGVudC0tYWN0aXZlJykuY2xhc3NMaXN0LnJlbW92ZSgnc29sdXRpb25zX19jb250ZW50LS1hY3RpdmUnKTtcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5zb2x1dGlvbnNfX2NvbnRlbnRbZGF0YS10YWI9XCIke3RhcmdldH1cIl1gKS5jbGFzc0xpc3QuYWRkKCdzb2x1dGlvbnNfX2NvbnRlbnQtLWFjdGl2ZScpO1xuICAgIH0pO1xuICB9KTtcbn1cbiAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9zc2liaWxpdHlfX21vcmUnKSkubWFwKGVsID0+IHtcbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZS5jdXJyZW50VGFyZ2V0O1xuICAgIGNvbnN0IHNob3dUZXh0ID0gZWxlbWVudC5kYXRhc2V0LnNob3c7XG4gICAgY29uc3QgaGlkZVRleHQgPSBlbGVtZW50LmRhdGFzZXQuaGlkZTtcblxuICAgIGVsZW1lbnQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcucG9zc2liaWxpdHlfX2hpZ2hsaWdodCcpLmNsYXNzTGlzdC50b2dnbGUoJ3Bvc3NpYmlsaXR5X19oaWdobGlnaHQtLXNob3duJyk7XG4gICAgZWxlbWVudC5pbm5lclRleHQgPT09IHNob3dUZXh0ID8gZWxlbWVudC5pbm5lclRleHQgPSBoaWRlVGV4dCA6IGVsZW1lbnQuaW5uZXJUZXh0ID0gc2hvd1RleHQ7XG4gIH0pO1xufSk7XG4gIGNvbnN0ICRtYXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtY29udGFjdHMtbWFwJyk7XG5cbmlmICgkbWFwKSB7XG4gIGNvbnN0IGxvY2F0aW9uID0gWzU1LjgwNTUzMywgMzcuNTIxMzM2XTtcbiAgXG4gIGNvbnN0IGluaXRNYXAgPSAoKSA9PiB7XG4gICAgY29uc3QgbWFwID0gbmV3IHltYXBzLk1hcCgkbWFwLCB7XG4gICAgICBjZW50ZXI6IGxvY2F0aW9uLFxuICAgICAgem9vbTogMTZcbiAgICB9KTtcbiAgXG4gICAgY29uc3QgcGluID0gbmV3IHltYXBzLlBsYWNlbWFyayhsb2NhdGlvbiwge30sIHtcbiAgICAgIGljb25MYXlvdXQ6ICdkZWZhdWx0I2ltYWdlJyxcbiAgICAgIGljb25JbWFnZUhyZWY6ICdpbWcvaWNvbnMvcGluLnBuZycsXG4gICAgICBpY29uSW1hZ2VTaXplOiBbNzEsIDg2XSxcbiAgICAgIGljb25JbWFnZU9mZnNldDogWy0zNSwgLTg2XVxuICAgIH0pO1xuICBcbiAgICBtYXAuZ2VvT2JqZWN0cy5hZGQocGluKVxuICB9O1xuICBcbiAgeW1hcHMucmVhZHkoaW5pdE1hcCk7XG59XG5cbn0iXX0=
