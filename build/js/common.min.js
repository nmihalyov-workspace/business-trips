"use strict";window.onload=function(){var e={popup:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=t.onHide,n=t.onShow,c=function(){document.body.style.cssText="position: fixed; margin-top: ".concat(-window.scrollY,"px")},i=function(e){document.body.style.cssText="position: static; margin-top: 0",window.scrollTo(0,e)};return{isShown:function(){return e.classList.contains("popup--opened")},show:function(){var t=new Promise((function(t){e.style.display="block",t()}));c(),t.then((function(){e.classList.add("popup--opened"),"function"==typeof n&&n()}))},hide:function(){var t=-parseInt(document.body.style.marginTop);e.classList.remove("popup--opened"),setTimeout((function(){e.style.display="none",i(t),"function"==typeof o&&o()}),300)}}}};Array.from(document.querySelectorAll(".js-open-popup")).map((function(t){return t.addEventListener("click",(function(t){t.preventDefault();var o=t.currentTarget.dataset.popup,n=document.querySelector('.js-popup[data-popup="'.concat(o,'"]'));e.popup(n).show()}))})),Array.from(document.querySelectorAll(".js-close-popup")).map((function(t){return t.addEventListener("click",(function(t){if(t.preventDefault(),!t.target.closest(".popup__window")||!t.currentTarget.classList.contains("js-popup")){var o=t.currentTarget.closest(".popup");e.popup(o).hide()}}))}));var t=document.querySelector(".js-burger"),o=0;document.querySelector(".js-burger").addEventListener("click",(function(){document.querySelector(".header__burger--active")?(document.body.style.cssText="position: static; margin-top: 0",window.scrollTo(0,o)):(o=window.scrollY,document.body.style.cssText="position: fixed; margin-top: ".concat(-o,"px")),t.classList.toggle("header__burger--active"),document.querySelector(".header__menu").classList.toggle("header__menu--active")}));document.querySelector(".compare__block")&&window.addEventListener("scroll",(function e(){var t=window.scrollY;t+window.innerHeight/2>document.querySelector(".compare__block").getBoundingClientRect().top+t&&(document.querySelectorAll(".compare__block")[1].classList.add("compare__block--highlight"),window.removeEventListener("scroll",e))}));document.querySelector(".organization__map")&&window.addEventListener("scroll",(function e(){var t=window.scrollY;t+window.innerHeight/1.5>document.querySelector(".organization__map").getBoundingClientRect().top+t&&(document.querySelector(".organization__map").classList.add("organization__map--animated"),window.removeEventListener("scroll",e))})),document.querySelectorAll(".solutions__tab").length&&(Array.from(document.querySelectorAll(".solutions__tab")).map((function(e){e.addEventListener("click",(function(e){var t=e.currentTarget.dataset.tab;document.querySelector(".solutions__tab--active").classList.remove("solutions__tab--active"),e.currentTarget.classList.add("solutions__tab--active"),document.querySelector(".solutions__content-info--active").classList.remove("solutions__content-info--active"),document.querySelector('.solutions__content-info[data-tab="'.concat(t,'"]')).classList.add("solutions__content-info--active")}))})),Array.from(document.querySelectorAll(".solutions__select-item")).map((function(e){e.addEventListener("click",(function(e){var t=e.currentTarget,o=t.parentNode.previousElementSibling,n=t.dataset.tab,c=document.querySelector(".solutions__select");c.classList.contains("solutions__select--active")&&o.classList.contains("solutions__select-item")&&(t.parentNode.prepend(o),t.parentNode.parentNode.prepend(t)),c.classList.toggle("solutions__select--active"),document.querySelector(".solutions__content-info--active").classList.remove("solutions__content-info--active"),document.querySelector('.solutions__content-info[data-tab="'.concat(n,'"]')).classList.add("solutions__content-info--active")}))}))),Array.from(document.querySelectorAll(".possibility__more")).map((function(e){e.addEventListener("click",(function(e){var t=e.currentTarget,o=t.dataset.show,n=t.dataset.hide;t.parentNode.querySelector(".possibility__highlight").classList.toggle("possibility__highlight--shown"),t.innerText===o?t.innerText=n:t.innerText=o}))}));var n=document.querySelector(".js-contacts-map");if(n){var c=[55.805533,37.521336];ymaps.ready((function(){var e=new ymaps.Map(n,{center:c,zoom:16}),t=new ymaps.Placemark(c,{},{iconLayout:"default#image",iconImageHref:"img/icons/pin.png",iconImageSize:[71,86],iconImageOffset:[-35,-86]});e.geoObjects.add(t)}))}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi5qcyJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJvbmxvYWQiLCIkYXBpIiwiJHBvcHVwIiwiX3JlZiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIm9uSGlkZSIsIm9uU2hvdyIsImRvY3VtZW50Iiwic3R5bGUiLCJjb25jYXQiLCJzY3JvbGxZIiwiYm9keSIsImNzc1RleHQiLCJzY3JvbGxUbyIsIm9mZnNldCIsImlzU2hvd24iLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInNob3ciLCJQcm9taXNlIiwicmVzb2x2ZSIsImRpc3BsYXkiLCJoaWRlT3ZlcmZsb3ciLCJhZGQiLCJwcm9taXNlIiwiaGlkZSIsInBhcnNlSW50IiwibWFyZ2luVG9wIiwicmVtb3ZlIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIm1hcCIsImVsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImN1cnJlbnRUYXJnZXQiLCJwb3B1cCIsInRhcmdldCIsImNsb3Nlc3QiLCJxdWVyeVNlbGVjdG9yIiwic2hvd092ZXJmbG93IiwiJGJ1cmdlciIsInRvZ2dsZSIsImNvbXBhcmVBbmltYXRpb24iLCJ5IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwidG9wIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9yZ2FuaXphdGlvbkFuaW1hdGlvbiIsImRhdGFzZXQiLCJ0YWIiLCJlbGVtZW50IiwicGFyZW50Tm9kZSIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJjdXJyZW50U2VsZWN0SXRlbSIsInNlbGVjdCIsInNob3dUZXh0IiwiaGlkZVRleHQiLCIkbWFwIiwibG9jYXRpb24iLCJ5bWFwcyIsInJlYWR5IiwiTWFwIiwiY2VudGVyIiwiem9vbSIsImljb25MYXlvdXQiLCJQbGFjZW1hcmsiLCJpY29uSW1hZ2VIcmVmIiwiaWNvbkltYWdlU2l6ZSIsImljb25JbWFnZU9mZnNldCIsImdlb09iamVjdHMiLCJwaW4iXSwibWFw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QUFBLEVBQUFBLGNBQ0ttQixFQUFXQSxFQUFDaEIsUUFBbEJuQixLQUNNd0MsRUFBV0wsRUFBUUYsUUFBUWpDLEtBR2pDbUMsRUFBQUEsV0FBUUMsY0FBV2IsMkJBQW5CekIsVUFBNERBLE9BQVU0QixpQ0FDdEVTLEVBQUFBLFlBQUFLLEVBQUFMLEVBQWlDQSxVQUFBTSxFQUFqQ04sRUFBZ0VBLFVBQUFLLFFBR2xFLElBQU1FLEVBQU9yRCxTQUFTa0MsY0FBYyxvQkFFdEMsR0FBQW1CLEVBQUEsQ0FDRSxJQUFNQyxFQUFXLENBQUMsVUFBVyxXQXZLL0JDLE1BQUFDLE9BeUtrQixXQUNkLElBQU0vQixFQUFNLElBQUk4QixNQUFNRSxJQUFJSixFQUFNLENBQzlCSyxPQUFNSixFQUNOSyxLQUFJLEtBSUpDLEVBQUFBLElBQVlMLE1BQUFNLFVBRGdDUCxFQUFBLEdBQUEsQ0FFNUNRLFdBQUFBLGdCQUNBQyxjQUFhLG9CQUNiQyxjQUFBQSxDQUFBQSxHQUFrQixJQUowQkEsZ0JBQTlDLEVBQUEsSUFBQSxNQU9BdkMsRUFBSXdDLFdBQVdqRCxJQUFJa0QiLCJmaWxlIjoiY29tbW9uLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XG5cbiAgLy8g0J7QsdGK0LXQutGCINCz0LvQvtCx0LDQu9GM0L3QvtCz0L4gQVBJXG5jb25zdCAkYXBpID0ge307XG5cbi8vIEFQSSDQtNC70Y8g0YDQsNCx0L7RgtGLINGBINC/0L7Qv9Cw0L/QsNC80LhcbiRhcGkucG9wdXAgPSAoJHBvcHVwLCB7IG9uSGlkZSwgb25TaG93IH0gPSB7fSkgPT4ge1xuICAvLyDQntGC0LrQu9GO0YfQsNC10YIg0LLQvtC30LzQvtC20L3QvtGB0YLRjCDRgdC60YDQvtC70LvQuNGC0Ywg0YHRgtGA0LDQvdC40YbRg1xuICBjb25zdCBoaWRlT3ZlcmZsb3cgPSAoKSA9PiB7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jc3NUZXh0ID0gYHBvc2l0aW9uOiBmaXhlZDsgbWFyZ2luLXRvcDogJHstd2luZG93LnNjcm9sbFl9cHhgO1xuICB9O1xuICBcbiAgLy8g0JLQutC70Y7Rh9Cw0LXRgiDQstC+0LfQvNC+0LbQvdC+0YHRgtGMINGB0LrRgNC+0LvQu9C40YLRjCDRgdGC0YDQsNC90LjRhtGDXG4gIGNvbnN0IHNob3dPdmVyZmxvdyA9IG9mZnNldCA9PiB7XG4gICAgZG9jdW1lbnQuYm9keS5zdHlsZS5jc3NUZXh0ID0gJ3Bvc2l0aW9uOiBzdGF0aWM7IG1hcmdpbi10b3A6IDAnO1xuICAgIFxuICAgIHdpbmRvdy5zY3JvbGxUbygwLCBvZmZzZXQpO1xuICB9O1xuICBcbiAgcmV0dXJuIHtcbiAgICAvLyDQktC+0LfQstGA0LDRidCw0LXRgiB0cnVlLCDQtdGB0LvQuCDQv9C+0L/QsNC/INC/0L7QutCw0LfRi9Cy0LDQtdGC0YHRjywg0LIg0LjQvdC+0Lwg0YHQu9GD0YfQsNC1IGZhbHNlXG4gICAgaXNTaG93bjogKCkgPT4gJHBvcHVwLmNsYXNzTGlzdC5jb250YWlucygncG9wdXAtLW9wZW5lZCcpLFxuICAgIC8vINCf0L7QutCw0LfRi9Cy0LDQtdGCINC/0L7Qv9Cw0L9cbiAgICBzaG93KCkge1xuICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAkcG9wdXAuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH0pO1xuXG4gICAgICBoaWRlT3ZlcmZsb3coKTtcblxuICAgICAgcHJvbWlzZS50aGVuKCgpID0+IHtcbiAgICAgICAgJHBvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwLS1vcGVuZWQnKTtcbiAgICAgICAgaWYgKHR5cGVvZiBvblNob3cgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBvblNob3coKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcbiAgICAvLyDQodC60YDRi9Cy0LDQtdGCINC/0L7Qv9Cw0L9cbiAgICBoaWRlKCkge1xuICAgICAgY29uc3Qgb2Zmc2V0ID0gLXBhcnNlSW50KGRvY3VtZW50LmJvZHkuc3R5bGUubWFyZ2luVG9wKTtcbiAgXG4gICAgICAkcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXAtLW9wZW5lZCcpO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICRwb3B1cC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBzaG93T3ZlcmZsb3cob2Zmc2V0KTtcbiAgICAgICAgaWYgKHR5cGVvZiBvbkhpZGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICBvbkhpZGUoKTtcbiAgICAgICAgfVxuICAgICAgfSwgMzAwKTtcbiAgICB9XG4gIH07XG59O1xuXG4gIEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmpzLW9wZW4tcG9wdXAnKSkubWFwKGVsID0+XG4gIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY29uc3QgdGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQucG9wdXA7XG4gICAgY29uc3QgJHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmpzLXBvcHVwW2RhdGEtcG9wdXA9XCIke3RhcmdldH1cIl1gKTtcbiAgICBcbiAgICAkYXBpLnBvcHVwKCRwb3B1cCkuc2hvdygpO1xuICB9KVxuKTtcbiAgXG5BcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5qcy1jbG9zZS1wb3B1cCcpKS5tYXAoZWwgPT5cbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICBpZighZS50YXJnZXQuY2xvc2VzdCgnLnBvcHVwX193aW5kb3cnKSB8fCAhZS5jdXJyZW50VGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnanMtcG9wdXAnKSkge1xuICAgICAgY29uc3QgJHBvcHVwID0gZS5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJy5wb3B1cCcpO1xuXG4gICAgICAkYXBpLnBvcHVwKCRwb3B1cCkuaGlkZSgpO1xuICAgIH1cbiAgfSlcbik7XG4gIFxuICBjb25zdCAkYnVyZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLWJ1cmdlcicpO1xubGV0IG9mZnNldCA9IDA7XG5jb25zdCBoaWRlT3ZlcmZsb3cgPSAoKSA9PiB7XG4gIG9mZnNldCA9IHdpbmRvdy5zY3JvbGxZO1xuICBkb2N1bWVudC5ib2R5LnN0eWxlLmNzc1RleHQgPSBgcG9zaXRpb246IGZpeGVkOyBtYXJnaW4tdG9wOiAkey1vZmZzZXR9cHhgO1xufTtcbmNvbnN0IHNob3dPdmVyZmxvdyA9ICgpID0+IHtcbiAgZG9jdW1lbnQuYm9keS5zdHlsZS5jc3NUZXh0ID0gJ3Bvc2l0aW9uOiBzdGF0aWM7IG1hcmdpbi10b3A6IDAnO1xuICBcbiAgd2luZG93LnNjcm9sbFRvKDAsIG9mZnNldCk7XG59O1xuXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtYnVyZ2VyJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyX19idXJnZXItLWFjdGl2ZScpKSB7XG4gICAgc2hvd092ZXJmbG93KCk7XG4gIH0gZWxzZSB7XG4gICAgaGlkZU92ZXJmbG93KCk7XG4gIH1cbiAgJGJ1cmdlci5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXJfX2J1cmdlci0tYWN0aXZlJyk7XG4gIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXJfX21lbnUnKS5jbGFzc0xpc3QudG9nZ2xlKCdoZWFkZXJfX21lbnUtLWFjdGl2ZScpO1xufSk7XG4gIGNvbnN0IGNvbXBhcmVBbmltYXRpb24gPSAoKSA9PiB7XG4gIGNvbnN0IHkgPSB3aW5kb3cuc2Nyb2xsWTtcblxuICBpZiAoeSArIHdpbmRvdy5pbm5lckhlaWdodCAvIDIgPiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29tcGFyZV9fYmxvY2snKS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyB5KSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbXBhcmVfX2Jsb2NrJylbMV0uY2xhc3NMaXN0LmFkZCgnY29tcGFyZV9fYmxvY2stLWhpZ2hsaWdodCcpO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBjb21wYXJlQW5pbWF0aW9uKVxuICB9XG59O1xuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbXBhcmVfX2Jsb2NrJykpIHtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIGNvbXBhcmVBbmltYXRpb24pO1xufVxuICBjb25zdCBvcmdhbml6YXRpb25BbmltYXRpb24gPSAoKSA9PiB7XG4gIGNvbnN0IHkgPSB3aW5kb3cuc2Nyb2xsWTtcblxuICBpZiAoeSArIHdpbmRvdy5pbm5lckhlaWdodCAvIDEuNSA+IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5vcmdhbml6YXRpb25fX21hcCcpLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLnRvcCArIHkpIHtcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcub3JnYW5pemF0aW9uX19tYXAnKS5jbGFzc0xpc3QuYWRkKCdvcmdhbml6YXRpb25fX21hcC0tYW5pbWF0ZWQnKTtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgb3JnYW5pemF0aW9uQW5pbWF0aW9uKVxuICB9XG59O1xuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm9yZ2FuaXphdGlvbl9fbWFwJykpIHtcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIG9yZ2FuaXphdGlvbkFuaW1hdGlvbik7XG59XG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc29sdXRpb25zX190YWInKS5sZW5ndGgpIHtcbiAgQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc29sdXRpb25zX190YWInKSkubWFwKGVsID0+IHtcbiAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZS5jdXJyZW50VGFyZ2V0LmRhdGFzZXQudGFiO1xuXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc29sdXRpb25zX190YWItLWFjdGl2ZScpLmNsYXNzTGlzdC5yZW1vdmUoJ3NvbHV0aW9uc19fdGFiLS1hY3RpdmUnKTtcbiAgICAgIGUuY3VycmVudFRhcmdldC5jbGFzc0xpc3QuYWRkKCdzb2x1dGlvbnNfX3RhYi0tYWN0aXZlJyk7XG4gICAgICBcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zb2x1dGlvbnNfX2NvbnRlbnQtaW5mby0tYWN0aXZlJykuY2xhc3NMaXN0LnJlbW92ZSgnc29sdXRpb25zX19jb250ZW50LWluZm8tLWFjdGl2ZScpO1xuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLnNvbHV0aW9uc19fY29udGVudC1pbmZvW2RhdGEtdGFiPVwiJHt0YXJnZXR9XCJdYCkuY2xhc3NMaXN0LmFkZCgnc29sdXRpb25zX19jb250ZW50LWluZm8tLWFjdGl2ZScpO1xuICAgIH0pO1xuICB9KTtcblxuICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zb2x1dGlvbnNfX3NlbGVjdC1pdGVtJykpLm1hcChlbCA9PiB7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgICBjb25zdCBjdXJyZW50U2VsZWN0SXRlbSA9IGVsZW1lbnQucGFyZW50Tm9kZS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgICAgY29uc3QgdGFyZ2V0ID0gZWxlbWVudC5kYXRhc2V0LnRhYjtcbiAgICAgIGNvbnN0IHNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zb2x1dGlvbnNfX3NlbGVjdCcpO1xuXG4gICAgICBpZiAoc2VsZWN0LmNsYXNzTGlzdC5jb250YWlucygnc29sdXRpb25zX19zZWxlY3QtLWFjdGl2ZScpICYmIGN1cnJlbnRTZWxlY3RJdGVtLmNsYXNzTGlzdC5jb250YWlucygnc29sdXRpb25zX19zZWxlY3QtaXRlbScpKSB7XG4gICAgICAgIGVsZW1lbnQucGFyZW50Tm9kZS5wcmVwZW5kKGN1cnJlbnRTZWxlY3RJdGVtKTtcbiAgICAgICAgZWxlbWVudC5wYXJlbnROb2RlLnBhcmVudE5vZGUucHJlcGVuZChlbGVtZW50KTtcbiAgICAgIH1cblxuICAgICAgc2VsZWN0LmNsYXNzTGlzdC50b2dnbGUoJ3NvbHV0aW9uc19fc2VsZWN0LS1hY3RpdmUnKTtcbiAgICAgIFxuICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNvbHV0aW9uc19fY29udGVudC1pbmZvLS1hY3RpdmUnKS5jbGFzc0xpc3QucmVtb3ZlKCdzb2x1dGlvbnNfX2NvbnRlbnQtaW5mby0tYWN0aXZlJyk7XG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuc29sdXRpb25zX19jb250ZW50LWluZm9bZGF0YS10YWI9XCIke3RhcmdldH1cIl1gKS5jbGFzc0xpc3QuYWRkKCdzb2x1dGlvbnNfX2NvbnRlbnQtaW5mby0tYWN0aXZlJyk7XG4gICAgfSk7XG4gIH0pO1xufVxuICBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3NzaWJpbGl0eV9fbW9yZScpKS5tYXAoZWwgPT4ge1xuICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGNvbnN0IGVsZW1lbnQgPSBlLmN1cnJlbnRUYXJnZXQ7XG4gICAgY29uc3Qgc2hvd1RleHQgPSBlbGVtZW50LmRhdGFzZXQuc2hvdztcbiAgICBjb25zdCBoaWRlVGV4dCA9IGVsZW1lbnQuZGF0YXNldC5oaWRlO1xuXG4gICAgZWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5wb3NzaWJpbGl0eV9faGlnaGxpZ2h0JykuY2xhc3NMaXN0LnRvZ2dsZSgncG9zc2liaWxpdHlfX2hpZ2hsaWdodC0tc2hvd24nKTtcbiAgICBlbGVtZW50LmlubmVyVGV4dCA9PT0gc2hvd1RleHQgPyBlbGVtZW50LmlubmVyVGV4dCA9IGhpZGVUZXh0IDogZWxlbWVudC5pbm5lclRleHQgPSBzaG93VGV4dDtcbiAgfSk7XG59KTtcbiAgY29uc3QgJG1hcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1jb250YWN0cy1tYXAnKTtcblxuaWYgKCRtYXApIHtcbiAgY29uc3QgbG9jYXRpb24gPSBbNTUuODA1NTMzLCAzNy41MjEzMzZdO1xuICBcbiAgY29uc3QgaW5pdE1hcCA9ICgpID0+IHtcbiAgICBjb25zdCBtYXAgPSBuZXcgeW1hcHMuTWFwKCRtYXAsIHtcbiAgICAgIGNlbnRlcjogbG9jYXRpb24sXG4gICAgICB6b29tOiAxNlxuICAgIH0pO1xuICBcbiAgICBjb25zdCBwaW4gPSBuZXcgeW1hcHMuUGxhY2VtYXJrKGxvY2F0aW9uLCB7fSwge1xuICAgICAgaWNvbkxheW91dDogJ2RlZmF1bHQjaW1hZ2UnLFxuICAgICAgaWNvbkltYWdlSHJlZjogJ2ltZy9pY29ucy9waW4ucG5nJyxcbiAgICAgIGljb25JbWFnZVNpemU6IFs3MSwgODZdLFxuICAgICAgaWNvbkltYWdlT2Zmc2V0OiBbLTM1LCAtODZdXG4gICAgfSk7XG4gIFxuICAgIG1hcC5nZW9PYmplY3RzLmFkZChwaW4pXG4gIH07XG4gIFxuICB5bWFwcy5yZWFkeShpbml0TWFwKTtcbn1cblxufSJdfQ==
